<odoo>
    <template id="report_stock_picking_sansimon">
        <t t-call="web.html_container">
            <t t-call="web.basic_layout">
                <div class="header">
                    <link rel="stylesheet" href="/sansimon/static/src/css/report.css" />
                    <div class="container">
                        <div class="row">
                            <div class="col-2 text-left">
                                <img t-if="o.company_id.logo" t-att-src="'data:image/png;base64,%s' % to_text(o.company_id.logo)" class="factura_logo" />
                            </div>
                            <div class="col-8 text-center">
                                <h6>
                                    <span t-field="o.company_id.company_registry" class="text-dark font-weight-bold" />
                                </h6>
                                <small>
                                    <h6>
                                        <span t-field="o.company_id.display_street" class="text-muted" />
                                    </h6>
                                </small>
                                <t t-if="o.company_id.phone">
                                    <small>
                                        <h6 class="text-muted">
                                            Telefono:
                                            <span t-field="o.company_id.phone" />
                                            , NIT:
                                            <span t-field="o.company_id.vat" />
                                        </h6>
                                    </small>
                                </t>
                                <small>
                                    <h6>
                                        <span t-field="o.company_id.website" class="text-muted" />
                                    </h6>
                                </small>
                            </div>
                            <div class="col-2 text-left">
                                <img t-if="o.company_id.logo" t-att-src="'data:image/png;base64,%s' % to_text(o.company_id.logo)" class="factura_logo" />
                            </div>
                        </div>
                        <br></br>
                        <div class="row">
                            <h4>
                                <span t-field="o.name" />
                            </h4>
                        </div>
                        <div class="row">
                            <table class="table table-sm">
                                <thead class="thead-dark">
                                    <tr>
                                        <th scope="col" style="width: 10%">ORDEN</th>
                                        <th scope="col" style="width: 20%">FECHA DE ENVIO</th>
                                        <th scope="col" style="width: 30%">FACTURA</th>
                                        <th scope="col" style="width: 40%">VENDEDOR</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-set="fac" t-value="o.obtener_factura()"/>
                                    <tr>
                                        <td>
                                            <span t-field="o.origin" />
                                        </td>
                                        <td>
                                            <t t-if="o.state == 'done'">
                                                <span t-field="o.date_done" />
                                            </t>
                                            <t t-if="o.state != 'done'">
                                                <span t-field="o.scheduled_date" />
                                            </t>
                                        </td>
                                        <td><t t-esc="fac['serie']"/>-<t t-esc="fac['no']"/></td>
                                        <td>
                                            <span t-field="o.sale_id.user_id.name" />
                                        </td>
                                    </tr>
                                    <tr  class="thead-dark">
                                        <th colspan="2">CLIENTE</th>
                                        <th colspan="2">DIRECCIÓN FISCAL</th>
                                    </tr>
                                    <tr>
                                        <td colspan="2"><span t-esc="o.partner_id.parent_id.name" /></td>
                                        <td colspan="2"><span t-esc="o.sale_id.partner_invoice_id.display_street" /></td>
                                    </tr>
                                    <tr  class="thead-dark">
                                        <th colspan="2">DIRECCIÓN DE ENTREGA</th>
                                        <th colspan="1">TELEFONO</th>
                                        <th colspan="1">CORREO</th>
                                    </tr>
                                    <tr>
                                        <td colspan="2"><span t-esc="o.partner_id.display_street" /></td>
                                        <td colspan="1"><span t-esc="o.partner_id.phone" /></td>
                                        <td colspan="1"><span t-esc="o.partner_id.email" /></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <div class="page">
                    <link rel="stylesheet" href="/sansimon/static/src/css/report.css" />
                    <div class="container">
                        <div class="row">
                            <table class="table table-sm" t-if="o.state!='done'" name="stock_move_table">
                                <thead class="thead-dark">
                                    <tr>
                                        <th name="th_sm_product">
                                            <strong>PRODUCTO</strong>
                                        </th>
                                        <th name="th_sm_quantity">
                                            <strong>CANTIDAD</strong>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <t t-set="lines" t-value="o.move_lines.filtered(lambda x: x.product_uom_qty)" />
                                    <tr t-foreach="lines" t-as="move">
                                        <td>
                                            <span t-field="move.product_id" />
                                            <p t-if="move.description_picking != move.product_id.name">
                                                <span t-field="move.description_picking" />
                                            </p>
                                        </td>
                                        <td>
                                            <span t-field="move.product_uom_qty" />
                                            <span t-field="move.product_uom" />
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <table class="table table-sm" t-if="o.move_line_ids and o.state=='done'" name="stock_move_line_table">
                                <t t-set="has_serial_number" t-value="o.move_line_ids.mapped('lot_id')" />
                                <thead class="thead-dark">
                                    <tr>
                                        <th name="th_sml_product">
                                            <strong>PRODUCTO</strong>
                                        </th>
                                        <th name="lot_serial" t-if="has_serial_number" groups="stock.group_lot_on_delivery_slip">
                                            Lot/Serial Number
                                        </th>
                                        <th name="th_sml_quantity" class="text-center">
                                            <strong>CANTIDAD</strong>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr t-foreach="o.move_line_ids" t-as="move_line">
                                        <td>
                                            <span t-field="move_line.product_id" />
                                            <p t-if="move_line.move_id.description_picking != move_line.product_id.name">
                                                <span t-field="move_line.move_id.description_picking" />
                                            </p>
                                        </td>
                                        <td t-if="has_serial_number and move_line.lot_id.name" groups="stock.group_lot_on_delivery_slip">
                                            <span t-field="move_line.lot_id.name" />
                                        </td>
                                        <td t-elif="has_serial_number" groups="stock.group_lot_on_delivery_slip">
                                            <span t-field="move_line.lot_name" />
                                        </td>
                                        <td class="text-center">
                                            <span t-field="move_line.qty_done" />
                                            <span t-field="move_line.product_uom_id" />
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <br></br>
                        <div class="row">
                            <div class="container">
                                Observaciones: <span t-field="o.note" />
                            </div>
                        </div>
                        <br></br>
                        <br></br>
                        <br></br>
                        <div class="row">
                            <div class="container">
                                <div class="row bottom-page">
                                    <div class="col-4">
                                        <hr color="black" />
                                    </div>
                                    <div class="col-4"></div>
                                    <div class="col-4">
                                        <hr color="black" />
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-4">
                                        <center>Firma bodeguero</center>
                                    </div>
                                    <div class="col-4">
                                    </div>
                                    <div class="col-4">
                                        <center>Firma transporte</center>
                                    </div>
                                    <br></br>
                                </div>

                                <div class="row">
                                    <div class="col-4"></div>
                                    <div class="col-4">
                                        <hr color="black" />
                                    </div>
                                    <div class="col-4"></div>
                                </div>
                                <div class="row">
                                    <div class="col-4"></div>
                                    <div class="col-4">
                                        <center>Firma cliente</center>
                                    </div>
                                    <div class="col-4"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </t>
        </t>
    </template>

    <record id="stock_picking_vale_entrega" model="report.paperformat">
        <field name="name">Papel Carta</field>
        <field name="default" eval="True" />
        <field name="format">custom</field>
        <field name="page_height">279</field>
        <field name="page_width">215</field>
        <field name="orientation">Portrait</field>
        <field name="margin_top">85</field>
        <field name="margin_bottom">10</field>
        <field name="margin_left">3</field>
        <field name="margin_right">3</field>
        <field name="header_line" eval="False" />
        <field name="header_spacing">80</field>
        <field name="dpi">90</field>
    </record>

    <report string="Delivery Slip" id="action_report_delivery" model="stock.picking" report_type="qweb-pdf" name="stock.report_deliveryslip" file="stock.report_deliveryslip" print_report_name="'Albarán de entrega - %s - %s' % (object.partner_id.name or '', object.name)" paperformat="stock_picking_vale_entrega" menu="False"/>

    <template id="stock_picking_call" inherit_id="stock.report_deliveryslip">
        <xpath expr="//t[@t-call='stock.report_delivery_document']" position="replace">
            <t t-call="sansimon.report_stock_picking_sansimon" t-lang="o.partner_id.lang" />
        </xpath>
    </template>
</odoo>
